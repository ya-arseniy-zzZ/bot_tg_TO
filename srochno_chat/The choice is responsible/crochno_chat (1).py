import schedule
import time
from telegram import Bot
import asyncio
from datetime import datetime
import json

# –¢–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–æ–ª—É—á–∏–ª–∏ –æ—Ç BotFather
TOKEN = '6680569737:AAE91Gy2sDszEQMYMajstuVZDuxppFQH1GU'
bot = Bot(TOKEN)

# ID —á–∞—Ç–∞, –∫—É–¥–∞ –±–æ—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
chat_id = '-1001949124952'

# –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª—É —Å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ª–∏—Ü–∞–º–∏
responsible_file = "weekend_responsible.json"

# –°–ª–æ–≤–∞—Ä—å —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏ –¥–ª—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ª–∏—Ü
messages = {
    'Monday': ('–ß–∞—Ç —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç–∫—Ä—ã—Ç!\n\n–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç! –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –¥–µ–Ω—å —Ç—è–∂–µ–ª—ã–π, –Ω–æ –Ω–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π—Ç–µ, —á–∞—Ç —Å—Ä–æ—á–Ω—ã–µ –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –æ–±–ª–µ–≥—á–∏—Ç—å –≤–∞—à—É –Ω–µ–¥–µ–ª—é. –ü–æ–º–Ω–∏—Ç–µ, –¥–∞–∂–µ —Å–∞–º–∞—è –¥–ª–∏–Ω–Ω–∞—è –Ω–µ–¥–µ–ª—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è! üòäüåü\n\n–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è —Ç–∞–∫–æ–µ:\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º:\n\nüåü –ï–ì–≠ - –ê–Ω—è (@shehmatova_um)\nüåü –û–ì–≠ - –í–∏—Ç–∞–ª–∏–π (@haiviro)\nüåü10 –∫–ª–∞—Å—Å - –ö–æ—Å—Ç—è (@kostya_axenovum)\nüåü –°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ - –ó–∏–ª—è (@zilya_krmv)\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è–º:\n\nüòä –ï–≤–∞ (@meva333)\nüòä –ö—Å—é—à–∞ (@hobishaker)'),
    'Tuesday': ('–ß–∞—Ç —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç–∫—Ä—ã—Ç!\n\n–°—á–∞—Å—Ç–ª–∏–≤–æ–≥–æ –≤—Ç–æ—Ä–Ω–∏–∫–∞! –ï—Å–ª–∏ –±—ã –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –±—ã–ª —Ñ–∏–ª—å–º–æ–º, –≤—Ç–æ—Ä–Ω–∏–∫ —Ç–æ—á–Ω–æ –±—ã —Å—Ç–∞–ª –µ–≥–æ —Å–∏–∫–≤–µ–ª–æ–º. –ù–µ –∑–∞–±—É–¥—å—Ç–µ –∑–∞–≥–ª—è–Ω—É—Ç—å –≤ —á–∞—Ç —Å—Ä–æ—á–Ω—ã–µ –∑–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –¥–æ–∑–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏! üé¨üçø\n\n–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è —Ç–∞–∫–æ–µ:\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º:\n\nüé¨ –ï–ì–≠ - –ì–ª–µ–± (@aglebto)\nüé¨ –û–ì–≠ - –í–∏—Ç–∞–ª–∏–π (@haiviro)\nüé¨ 10 –∫–ª–∞—Å—Å - –ö–æ—Å—Ç—è (@kostya_axenovum)\nüé¨ –°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ - –ó–∏–ª—è (@zilya_krmv)\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è–º:\n\nüçø –ï–≤–∞ (@meva333)\nüçø –ö—Å—é—à–∞ (@hobishaker)'),
    'Wednesday': ('–ß–∞—Ç —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç–∫—Ä—ã—Ç!\n\n–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º! –°—Ä–µ–¥–∞ - —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–∞—è –ø—è—Ç–Ω–∏—Ü–∞, –∞ —á–∞—Ç —Å—Ä–æ—á–Ω—ã–µ - –≤–∞—à –ª–∏—á–Ω—ã–π –∞–Ω—Ç–∏—Å—Ç—Ä–µ—Å—Å. –î–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º —ç—Ç–æ—Ç –¥–µ–Ω—å –Ω–∞ —É–¥–∏–≤–ª–µ–Ω–∏–µ –ª–µ–≥–∫–∏–º! üåàüòâ\n\n–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è —Ç–∞–∫–æ–µ:\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º:\n\nüåà –ï–ì–≠ - –ê–Ω—è (@shehmatova_um)\nüåà –û–ì–≠ - –í–∏—Ç–∞–ª–∏–π (@haiviro)\nüåà 10 –∫–ª–∞—Å—Å - –ö–æ—Å—Ç—è (@kostya_axenovum)\nüåà –°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ - –ó–∏–ª—è (@zilya_krmv)\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è–º:\n\nüòâ –ï–≤–∞ (@meva333)\nüòâ –ö—Å—é—à–∞ (@hobishaker)'),
    'Thursday': ('–ß–∞—Ç —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç–∫—Ä—ã—Ç!\n\n–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ –≤ —á–µ—Ç–≤–µ—Ä–≥! –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –ø–æ—Å–ª–µ —á–µ—Ç–≤–µ—Ä–≥–∞ —É–∂–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—è—Ç–Ω–∏—Ü–∞. –ê –ø–æ–∫–∞ —á—Ç–æ, —á–∞—Ç —Å—Ä–æ—á–Ω—ã–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–∞ –ø–ª–∞–≤—É. ‚õµüí™\n\n–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è —Ç–∞–∫–æ–µ:\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º:\n\n‚õµ –ï–ì–≠ - –ê–Ω—è (@shehmatova_um)\n‚õµ –û–ì–≠ - –í–∏—Ç–∞–ª–∏–π (@haiviro)\n‚õµ10 –∫–ª–∞—Å—Å - –ö–æ—Å—Ç—è (@kostya_axenovum)\n‚õµ –°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ - –ó–∏–ª—è (@zilya_krmv)\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è–º:\n\nüí™ –ï–≤–∞ (@meva333)\nüí™ –ö—Å—é—à–∞ (@hobishaker)'),
    'Friday': ('–ß–∞—Ç —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç–∫—Ä—ã—Ç!\n\n–£—Ä–∞, –ø—è—Ç–Ω–∏—Ü–∞! –í—Ä–µ–º—è –Ω–∞—á–∏–Ω–∞—Ç—å –æ—Ç—Å—á–µ—Ç –¥–æ –≤—ã—Ö–æ–¥–Ω—ã—Ö. –ê –ø–æ–∫–∞ —á—Ç–æ —á–∞—Ç —Å—Ä–æ—á–Ω—ã–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –∑–∞–∫–æ–Ω—á–∏—Ç—å —Ä–∞–±–æ—á—É—é –Ω–µ–¥–µ–ª—é –Ω–∞ –≤—ã—Å–æ–∫–æ–π –Ω–æ—Ç–µ! üéâüï∫\n\n–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è —Ç–∞–∫–æ–µ:\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º:\n\nüéâ –ï–ì–≠ - –ì–ª–µ–± (@aglebto)\nüéâ –û–ì–≠ - –í–∏—Ç–∞–ª–∏–π (@haiviro)\nüéâ 10 –∫–ª–∞—Å—Å - –ù–∞—Ç–∞—à–∞ (@umtasha)\nüéâ –°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ - –ó–∏–ª—è (@zilya_krmv)\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è–º:\n\nüï∫ –ï–≤–∞ (@meva333)\n\nüï∫ –ö—Å—é—à–∞ (@hobishaker)'),
    'Saturday': ('–ß–∞—Ç —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç–∫—Ä—ã—Ç!\n\n–°—É–±–±–æ—Ç–∞ –Ω–∞—Å—Ç–∞–ª–∞, –∏ –¥–∞–∂–µ –µ—Å–ª–∏ –≤—ã –Ω–∞ —Ä–∞–±–æ—Ç–µ, —á–∞—Ç —Å—Ä–æ—á–Ω—ã–µ –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–º–Ω–æ–≥–æ –≤–µ—Å–µ–ª—å—è –≤ –≤–∞—à –≤—ã—Ö–æ–¥–Ω–æ–π. –†–∞–±–æ—Ç–∞ –∏–ª–∏ –æ—Ç–¥—ã—Ö - –º—ã –ø–æ–¥–¥–µ—Ä–∂–∏–º –≤–∞—Å! üéàüòÉ–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è —Ç–∞–∫–æ–µ:\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º:\n\nüéà –ï–ì–≠ - –ê–Ω—è (@shehmatova_um)\nüéà –û–ì–≠ - –ö—Å—é—à–∞ (@hobishaker)\nüéà 10 –∫–ª–∞—Å—Å - –ö–æ—Å—Ç—è (@kostya_axenovum)\nüéà –°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ - –°–æ–Ω—è (@umschsonia)\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è–º:\n\nüòÉ {responsible_saturday}'),
    'Sunday': ('–ß–∞—Ç —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç–∫—Ä—ã—Ç!\n\n–ü—Ä–∏–≤–µ—Ç –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ! –î–µ–Ω—å –¥–ª—è –æ—Ç–¥—ã—Ö–∞, –Ω–æ –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —á—Ç–æ-—Ç–æ —Å—Ä–æ—á–Ω–æ–µ, —á–∞—Ç –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏. –ü—É—Å—Ç—å —ç—Ç–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –±—É–¥–µ—Ç –º—è–≥–∫–∏–º –∫–∞–∫ –≤–∞—à–µ –ª—é–±–∏–º–æ–µ –æ–¥–µ—è–ª–æ. üò¥üõãÔ∏è\n\n–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è —Ç–∞–∫–æ–µ:\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º:\n\nüò¥ –ï–ì–≠ - –ê–Ω—è (@shehmatova_um)\nüò¥ –û–ì–≠ - –í–∏—Ç–∞–ª–∏–π (@haiviro)\nüò¥ 10 –∫–ª–∞—Å—Å - –ö–æ—Å—Ç—è (@kostya_axenovum)\nüò¥ –°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ - –ó–∏–ª—è (@zilya_krmv)\n\n–í–æ–ø—Ä–æ—Å—ã –ø–æ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è–º:\n\nüõã {responsible_sunday}')
}


# –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ª–∏—Ü –∏–∑ JSON-—Ñ–∞–π–ª–∞
def load_weekend_responsible():
    try:
        with open(responsible_file, "r") as file:
            data = json.load(file)
            return data.get("saturday", None), data.get("sunday", None)
    except FileNotFoundError:
        return None, None


# –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º–∏
async def send_message(message):
    await bot.send_message(chat_id=chat_id, text=message)


# –ó–∞–¥–∞—á–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ª–∏—Ü–∞–º–∏
def job():
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏
    day_of_week = datetime.now().strftime('%A')

    # –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ª–∏—Ü –∏–∑ —Ñ–∞–π–ª–∞
    responsible_saturday, responsible_sunday = load_weekend_responsible()

    # –ò—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏
    message_template = messages.get(day_of_week, "–°–µ–≥–æ–¥–Ω—è —Ö–æ—Ä–æ—à–∏–π –¥–µ–Ω—å!")

    # –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–µ—Ç–æ–¥–∞ .format()
    message = message_template.format(
        responsible_saturday=responsible_saturday or "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ",
        responsible_sunday=responsible_sunday or "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"
    )

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    asyncio.run(send_message(message))


# –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 10:00
schedule.every().day.at("10:00").do(job)

# –ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ
while True:
    schedule.run_pending()
    time.sleep(60)
